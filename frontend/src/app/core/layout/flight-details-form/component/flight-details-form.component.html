<form [formGroup]="flightForm" (ngSubmit)="onSubmit()">
  <h2>{{ 'flightDetails.title' | transloco }}</h2>

  <mat-form-field appearance="fill">
    <mat-label>{{ 'flightDetails.flightNr' | transloco }}</mat-label>
    <input
      matInput
      type="text"
      formControlName="flightNr"
      placeholder="{{ 'flightDetails.typeFlightNr' | transloco }}"
    />
  </mat-form-field>

  <mat-form-field>
    <mat-label>{{ 'flightDetails.flightDate' | transloco }}</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="flightDate" />
    <mat-hint>DD/MM/YYYY</mat-hint>
    <mat-datepicker-toggle matIconSuffix [for]="picker" />
    <mat-datepicker #picker />
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>{{ 'flightDetails.departingAirport' | transloco }}</mat-label>
    <mat-select formControlName="departingAirport" required>
      <mat-option value="">{{ 'flightDetails.searchAirport' | transloco }}</mat-option>
      <mat-option *ngFor="let airport of airports" [value]="airport.iata">
        {{ airport.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>{{ 'flightDetails.destinationAirport' | transloco }}</mat-label>
    <mat-select formControlName="destinationAirport" required>
      <mat-option value="">{{ 'flightDetails.searchAirport' | transloco }}</mat-option>
      <mat-option *ngFor="let airport of airports" [value]="airport.iata">
        {{ airport.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <div>
    <mat-form-field>
      <mat-label>{{ 'flightDetails.plannedDepartureDate' | transloco }}</mat-label>
      <input
        matInput
        [matDatepicker]="departureDatePicker"
        formControlName="plannedDepartureDate"
      />
      <mat-hint>DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="departureDatePicker" />
      <mat-datepicker #departureDatePicker />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'flightDetails.plannedDepartureTime' | transloco }}</mat-label>
      <input
        matInput
        [matTimepicker]="departureTimePicker"
        formControlName="plannedDepartureTime"
      />
      <mat-timepicker-toggle matIconSuffix [for]="departureTimePicker" />
      <mat-timepicker #departureTimePicker />
    </mat-form-field>
  </div>

  <div>
    <mat-form-field>
      <mat-label>{{ 'flightDetails.plannedArrivalDate' | transloco }}</mat-label>
      <input matInput [matDatepicker]="arrivalDatePicker" formControlName="plannedArrivalDate" />
      <mat-hint>DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="arrivalDatePicker" />
      <mat-datepicker #arrivalDatePicker />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'flightDetails.plannedArrivalTime' | transloco }}</mat-label>
      <input matInput [matTimepicker]="arrivalTimePicker" formControlName="plannedArrivalTime" />
      <mat-timepicker-toggle matIconSuffix [for]="arrivalTimePicker" />
      <mat-timepicker #arrivalTimePicker />
    </mat-form-field>
  </div>

  <mat-form-field appearance="fill">
    <mat-label>{{ 'flightDetails.airline' | transloco }}</mat-label>
    <input
      matInput
      type="text"
      formControlName="airline"
      placeholder="{{ 'flightDetails.typeAirline' | transloco }}"
    />
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>{{ 'flightDetails.connectingFlight' | transloco }}</mat-label>
    <mat-select formControlName="connectingFlights" required>
      <mat-option value="">{{ 'flightDetails.noConnectingFlight' | transloco }}</mat-option>
      <ng-container *ngFor="let airport of airports">
        @if (airport.iata !== flightForm.get('destinationAirport')?.value) {
          <mat-option [value]="airport.iata">
            {{ flightForm.get('destinationAirport')?.value }} - {{ airport.name }}
          </mat-option>
        }
      </ng-container>
    </mat-select>
  </mat-form-field>

  <div class="form-buttons">
    <button mat-raised-button color="primary" type="button">{{
      'flightDetails.add' | transloco
    }}</button>
    <button mat-raised-button color="accent" type="button">{{
      'flightDetails.next' | transloco
    }}</button>
  </div>
</form>
