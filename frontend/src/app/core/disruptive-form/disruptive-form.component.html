<div class="flight-form-wrapper">
<form [formGroup]="formDisruption">
  <div class="form-fields">
  <mat-form-field appearance="fill" >
    <mat-label>{{ 'disruptiveMotive.dropDownText' | transloco }}</mat-label>
    <mat-select formControlName="disruptionMotive">
      @for(motive of motives; track $index) {
        <mat-option [value]="motive">
          {{ motive }}
        </mat-option>
      }
    </mat-select>
  </mat-form-field>
  @if(formDisruption.controls.disruptionMotive.value === DisruptiveMotiveLabels[DisruptiveMotive.cancelation]) {
    <mat-label>How many days before cancellation has the airline informed?</mat-label>
    <mat-form-field appearance="fill">
      <mat-label>Number of days</mat-label>
      <input
        type="number"
        matInput
        min="0"
        formControlName="daysBeforeCancelation"
      />
    </mat-form-field>
  }
  @else if(formDisruption.controls.disruptionMotive.value === DisruptiveMotiveLabels[DisruptiveMotive.delay]){
    <mat-form-field>
      <mat-label>Has the flight arrived?</mat-label>
      <mat-select formControlName="hasArrived">
        @for(motive of [true, false]; track $index) {
          <mat-option [value]="motive">
            {{ motive ? 'Yes' : 'No' }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
    @if(formDisruption.controls.hasArrived.value === true){
      <mat-label>How late arrived to final destination?</mat-label>
      <mat-form-field appearance="fill">
        <mat-label>Number of hours</mat-label>
        <input
          type="number"
          matInput
          min="0"
          formControlName="hoursLateArrival"
        />
      </mat-form-field>
    }
  }
  @else if(formDisruption.controls.disruptionMotive.value ===  DisruptiveMotiveLabels[DisruptiveMotive.deniedBoarding]) {
    <mat-form-field appearance="fill">
      <mat-label>Did you give up your seat voluntarily?</mat-label>
      <input
        type="text"
        matInput
        formControlName="gaveSeatVoluntarly"
        [matAutocomplete]="autoComplete"

      />
      <mat-autocomplete #autoComplete="matAutocomplete">
        <mat-option *ngFor="let option of [true, false]" [value]="option ? 'Yes' : 'No'">
          {{ option ? 'Yes' : 'No' }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    @if(formDisruption.controls.gaveSeatVoluntarly.value === 'No' ) {
      <mat-form-field appearance="fill">
        <mat-label>Reason behind denial of boarding</mat-label>
        <input
          type="text"
          matInput
          formControlName="deniedBoardingMotive"
          [matAutocomplete]="autoReasonMotive"

        />
        <mat-autocomplete #autoReasonMotive="matAutocomplete">
          <mat-option *ngFor="let option of reasons " [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    }
  }
  @if(formDisruption.controls.disruptionMotive.value ===  DisruptiveMotiveLabels[DisruptiveMotive.delay] ||
      formDisruption.controls.disruptionMotive.value ===  DisruptiveMotiveLabels[DisruptiveMotive.cancelation]) {
    <mat-form-field appearance="fill">
      <mat-label>Did the airline mention disruption motive?</mat-label>
      <mat-select formControlName="airlineMentionedMotive">
        @for(motive of [true, false]; track $index) {
          <mat-option [value]="motive">
            {{ motive ? 'Yes' : 'No' }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
    @if(formDisruption.controls.airlineMentionedMotive.value === true) {
      <mat-form-field appearance="fill">
        <mat-label>What was the motive communicated by the airline?</mat-label>
        <mat-select formControlName="communicatedMotive">
          @for(motive of airlineDeniedMotives; track $index) {
            <mat-option [value]="motive">
              {{ motive }}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>

    }
  }
    <p>{{eligibleText()}}</p>
  <div class="form-buttons">
    <button class="form-actions" mat-raised-button [disabled]="!isEligibile()" (click)="continue()">
      {{ 'flightDetails.next' | transloco }}
    </button>
  </div>
  </div>
</form>
</div>